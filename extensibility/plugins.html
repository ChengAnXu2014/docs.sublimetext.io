

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Plugins &mdash; Sublime Text Unofficial Documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/rtd_theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Packages" href="packages.html" />
    <link rel="prev" title="Syntax Definitions" href="syntaxdefs.html" />
     
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-29682491-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Sublime Text Unofficial Documentation
          

          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">About This Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic_concepts.html">Basic Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../editing/editing.html">Editing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../search_and_replace/search_and_replace_overview.html">Search and Replace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../file_processing/build_systems.html">Build Systems (Batch Processing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../file_management/file_management.html">File Management and Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../customization/customization.html">Customization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="extensibility.html">Extensibility and Automation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="macros.html">Macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="snippets.html">Snippets</a></li>
<li class="toctree-l2"><a class="reference internal" href="completions.html">Completions</a></li>
<li class="toctree-l2"><a class="reference internal" href="command_palette.html">Command Palette</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntaxdefs.html">Syntax Definitions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#where-to-store-plugins">Where to Store Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#your-first-plugin">Your First Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyzing-your-first-plugin">Analyzing Your First Plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#conventions-for-command-names">Conventions for Command Names</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#types-of-commands">Types of Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#shared-traits-of-commands">Shared Traits of Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#window-commands">Window Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#text-commands">Text Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#text-commands-and-the-edit-object">Text Commands and the <code class="docutils literal notranslate"><span class="pre">edit</span></code> Object</a></li>
<li class="toctree-l4"><a class="reference internal" href="#responding-to-events">Responding to Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="#another-plugin-example-feeding-the-completions-list">Another Plugin Example: Feeding the Completions List</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#learning-the-api">Learning the API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="packages.html">Packages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../command_line/command_line.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Sublime Text Unofficial Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="extensibility.html">Extending Sublime Text</a> &raquo;</li>
        
      <li>Plugins</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/extensibility/plugins.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="plugins">
<h1>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h1>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="../reference/api.html"><span class="doc">API Reference</span></a></dt><dd><p>More information on the Python API.</p>
</dd>
<dt><a class="reference internal" href="../reference/plugins.html"><span class="doc">Plugins Reference</span></a></dt><dd><p>More information about plugins.</p>
</dd>
</dl>
</div>
<p>This section is intended for users with programming skills.</p>
<p>Sublime Text can be extended through Python plugins. Plugins build features by
reusing existing commands or creating new ones. Plugins are a logical entity,
rather than a physical one.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>In order to write plugins, you must be able to program in <a class="reference external" href="http://www.python.org">Python</a>.
At the time of this writing, Sublime Text used Python 3.</p>
</div>
<div class="section" id="where-to-store-plugins">
<h2>Where to Store Plugins<a class="headerlink" href="#where-to-store-plugins" title="Permalink to this headline">¶</a></h2>
<p>Sublime Text will look for plugins only in these places:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Installed</span> <span class="pre">Packages</span></code> (only <em>.sublime-package</em> files)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Packages</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Packages/&lt;pkg_name&gt;/</span></code></p></li>
</ul>
<p>As a consequence, any plugin nested deeper in <code class="docutils literal notranslate"><span class="pre">Packages</span></code> won’t be loaded.</p>
<p>Keeping plugins directly under <code class="docutils literal notranslate"><span class="pre">Packages</span></code> is discouraged. Sublime Text sorts
packages in a predefined way before loading them, so if you save plugin files
directly under <code class="docutils literal notranslate"><span class="pre">Packages</span></code> you might get confusing results.</p>
</div>
<div class="section" id="your-first-plugin">
<h2>Your First Plugin<a class="headerlink" href="#your-first-plugin" title="Permalink to this headline">¶</a></h2>
<p>Let’s write a “Hello, World!” plugin for Sublime Text:</p>
<ol class="arabic simple">
<li><p>Select <strong>Tools | New Plugin…</strong> in the menu.</p></li>
<li><p>Save to <code class="docutils literal notranslate"><span class="pre">Packages/User/hello_world.py</span></code>.</p></li>
</ol>
<p>You’ve just written your first plugin! Let’s put it to use:</p>
<ol class="arabic simple">
<li><p>Create a new buffer (<code class="docutils literal notranslate"><span class="pre">Ctrl+n</span></code>).</p></li>
<li><p>Open the Python console (<code class="docutils literal notranslate"><span class="pre">Ctrl+`</span></code>).</p></li>
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">view.run_command(&quot;example&quot;)</span></code> and press enter.</p></li>
</ol>
<p>You should see the text “Hello, World!” in the newly created buffer.</p>
</div>
<div class="section" id="analyzing-your-first-plugin">
<h2>Analyzing Your First Plugin<a class="headerlink" href="#analyzing-your-first-plugin" title="Permalink to this headline">¶</a></h2>
<p>The plugin created in the previous section should look roughly like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sublime</span><span class="o">,</span> <span class="nn">sublime_plugin</span>

<span class="k">class</span> <span class="nc">ExampleCommand</span><span class="p">(</span><span class="n">sublime_plugin</span><span class="o">.</span><span class="n">TextCommand</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edit</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">edit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Both the <code class="docutils literal notranslate"><span class="pre">sublime</span></code> and <code class="docutils literal notranslate"><span class="pre">sublime_plugin</span></code> modules are provided by
Sublime Text; they are not part of the Python standard library.</p>
<p>As we mentioned earlier, plugins reuse or create <em>commands</em>. Commands are an
essential building block in Sublime Text. They are simply Python classes
that can be called in similar ways from different Sublime Text facilities,
like the plugin API, menu files, macros, etc.</p>
<p>Sublime Text Commands derive from the <code class="docutils literal notranslate"><span class="pre">*Command</span></code> classes defined in
<code class="docutils literal notranslate"><span class="pre">sublime_plugin</span></code> (more on this later).</p>
<p>The rest of the code in our example is concerned with particulars of
<code class="docutils literal notranslate"><span class="pre">TextCommand</span></code> or with the API. We’ll discuss those topics in later sections.</p>
<p>Before moving on, though, we’ll look at how we invoked the new command: first
we opened the Python console and then we issued a call to
<code class="docutils literal notranslate"><span class="pre">view.run_command()</span></code>. This is a rather inconvenient way of calling commands,
but it’s often useful when you’re in the development phase of a plugin. For
now, keep in mind that your commands can be accessed through key bindings
and by other means, just like other commands.</p>
<div class="section" id="conventions-for-command-names">
<h3>Conventions for Command Names<a class="headerlink" href="#conventions-for-command-names" title="Permalink to this headline">¶</a></h3>
<p>You may have noticed that our command is named <code class="docutils literal notranslate"><span class="pre">ExampleCommand</span></code>, but we
passed the string <code class="docutils literal notranslate"><span class="pre">example</span></code> to the API call instead. This is necessary
because Sublime Text standardizes command names by stripping the <code class="docutils literal notranslate"><span class="pre">Command</span></code>
suffix and separating <code class="docutils literal notranslate"><span class="pre">PhrasesLikeThis</span></code> with underscores, like so:
<code class="docutils literal notranslate"><span class="pre">phrases_like_this</span></code>.</p>
<p>New commands should follow the same naming pattern.</p>
</div>
</div>
<div class="section" id="types-of-commands">
<h2>Types of Commands<a class="headerlink" href="#types-of-commands" title="Permalink to this headline">¶</a></h2>
<p>You can create the following types of commands:</p>
<ul class="simple">
<li><p>Window commands (<code class="docutils literal notranslate"><span class="pre">sublime_plugin.WindowCommand</span></code>)</p></li>
<li><p>Text commands (<code class="docutils literal notranslate"><span class="pre">sublime_plugin.TextCommand</span></code>)</p></li>
</ul>
<p>When writing plugins, consider your goal and choose the appropriate type of
commands.</p>
<div class="section" id="shared-traits-of-commands">
<h3>Shared Traits of Commands<a class="headerlink" href="#shared-traits-of-commands" title="Permalink to this headline">¶</a></h3>
<p>All commands need to implement a <code class="docutils literal notranslate"><span class="pre">.run()</span></code> method in order to work. Additionally,
they can receive an arbitrarily long number of keyword parameters.</p>
<p><strong>Note:</strong> Parameters to commands must be valid JSON values due to how ST
serializes them internally.</p>
</div>
<div class="section" id="window-commands">
<h3>Window Commands<a class="headerlink" href="#window-commands" title="Permalink to this headline">¶</a></h3>
<p>Window commands operate at the window level. This doesn’t mean that you can’t
manipulate views from window commands, but rather that you don’t need views in
order for window commands to be available. For instance, the built-in command
<code class="docutils literal notranslate"><span class="pre">new_file</span></code> is defined as a <code class="docutils literal notranslate"><span class="pre">WindowCommand</span></code> so it works even when no view
is open. Requiring a view to exist in that case wouldn’t make sense.</p>
<p>Window command instances have a <code class="docutils literal notranslate"><span class="pre">.window</span></code> attribute to point to the window
instance that created them.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.run()</span></code> method of a window command doesn’t require any positional
parameter.</p>
<p>Window commands are able to route text commands to their window’s active view.</p>
</div>
<div class="section" id="text-commands">
<h3>Text Commands<a class="headerlink" href="#text-commands" title="Permalink to this headline">¶</a></h3>
<p>Text commands operate at the view level, so they require a view to exist
in order to be available.</p>
<p>Text command instances have a <code class="docutils literal notranslate"><span class="pre">.view</span></code> attribute pointing to the view instance
that created them.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.run()</span></code> method of text commands requires an <code class="docutils literal notranslate"><span class="pre">edit</span></code> instance as
its first positional argument.</p>
</div>
<div class="section" id="text-commands-and-the-edit-object">
<h3>Text Commands and the <code class="docutils literal notranslate"><span class="pre">edit</span></code> Object<a class="headerlink" href="#text-commands-and-the-edit-object" title="Permalink to this headline">¶</a></h3>
<p>The edit object groups modifications to the view so that undo and macros work
sensibly.</p>
<p><strong>Note:</strong> Contrary to older versions, Sublime Text 3 doesn’t allow programmatic
control over edit objects. The API is in charge of managing their life cycle.
Plugin creators must ensure that all modifying operations occur inside the
<code class="docutils literal notranslate"><span class="pre">.run</span></code> method of new text commands. To call existing commands, you can use
<code class="docutils literal notranslate"><span class="pre">view.run_command(&lt;cmd_name&gt;,</span> <span class="pre">&lt;args&gt;)</span></code> or similar API calls.</p>
</div>
<div class="section" id="responding-to-events">
<h3>Responding to Events<a class="headerlink" href="#responding-to-events" title="Permalink to this headline">¶</a></h3>
<p>Any command deriving from <code class="docutils literal notranslate"><span class="pre">EventListener</span></code> will be able to respond to events.</p>
</div>
<div class="section" id="another-plugin-example-feeding-the-completions-list">
<span id="plugins-completions-example"></span><h3>Another Plugin Example: Feeding the Completions List<a class="headerlink" href="#another-plugin-example-feeding-the-completions-list" title="Permalink to this headline">¶</a></h3>
<p>Let’s create a plugin that fetches data from Google’s Autocomplete service and
then feeds it to the Sublime Text completions list. Please note that, as ideas
for plugins go, this a very bad one.</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sublime</span><span class="o">,</span> <span class="nn">sublime_plugin</span>

<span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span> <span class="k">as</span> <span class="n">ET</span>
<span class="kn">import</span> <span class="nn">urllib</span>

<span class="n">GOOGLE_AC</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;http://google.com/complete/search?output=toolbar&amp;q=</span><span class="si">%s</span><span class="s2">&quot;</span>

<span class="k">class</span> <span class="nc">GoogleAutocomplete</span><span class="p">(</span><span class="n">sublime_plugin</span><span class="o">.</span><span class="n">EventListener</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">on_query_completions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">locations</span><span class="p">):</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
            <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">GOOGLE_AC</span> <span class="o">%</span> <span class="n">prefix</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;./CompleteSuggestion/suggestion&quot;</span><span class="p">)</span>

        <span class="n">sugs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">],)</span> <span class="o">*</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">sugs</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure you don’t keep this plugin around after trying it or it will
interfere with the autocompletion system.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="../reference/api.html#sublime_plugin.EventListener.on_query_completions" title="sublime_plugin.EventListener.on_query_completions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EventListener.on_query_completions()</span></code></a></dt><dd><p>Documentation on the API event used in this example.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="learning-the-api">
<h2>Learning the API<a class="headerlink" href="#learning-the-api" title="Permalink to this headline">¶</a></h2>
<p>The API reference is documented at <a class="reference external" href="https://www.sublimetext.com/docs/3/api_reference.html">www.sublimetext.com/docs/3/api_reference.html</a></p>
<p>To get acquainted with the Sublime Text API and the available commands,
it may be helpful to read existing code and learn from it.</p>
<p>In particular, the <code class="file docutils literal notranslate"><span class="pre">Packages/Default</span></code> contains many examples of
undocumented commands and API calls. Note that you will first have to extract
its contents to a folder if you want to take a look at the code within - <a class="reference external" href="https://packagecontrol.io/packages/PackageResourceViewer">PackageResourceViewer</a> helps with this.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="packages.html" class="btn btn-neutral float-right" title="Packages" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="syntaxdefs.html" class="btn btn-neutral float-left" title="Syntax Definitions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 The Unofficial Documentation Authors

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>